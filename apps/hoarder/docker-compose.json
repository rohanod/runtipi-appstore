{
  "schemaVersion": 2,
  "services": [
    {
      "name": "hoarder",
      "image": "ghcr.io/karakeep-app/karakeep:0.30.0",
      "isMain": true,
      "internalPort": 3000,
      "environment": [
        {
          "key": "MEILI_ADDR",
          "value": "${MEILI_ADDR}"
        },
        {
          "key": "BROWSER_WEB_URL",
          "value": "${BROWSER_WEB_URL}"
        },
        {
          "key": "DATA_DIR",
          "value": "${DATA_DIR:-/data}"
        },
        {
          "key": "KARAKEEP_VERSION",
          "value": "${KARAKEEP_VERSION}"
        },
        {
          "key": "OPENAI_API_KEY",
          "value": "${OPENAI_API_KEY}"
        },
        {
          "key": "NEXTAUTH_SECRET",
          "value": "${NEXTAUTH_SECRET}"
        },
        {
          "key": "MEILI_MASTER_KEY",
          "value": "${MEILI_MASTER_KEY}"
        },
        {
          "key": "NEXTAUTH_URL",
          "value": "${NEXTAUTH_URL}"
        },
        {
          "key": "INFERENCE_IMAGE_MODEL",
          "value": "${INFERENCE_IMAGE_MODEL}"
        },
        {
          "key": "INFERENCE_TEXT_MODEL",
          "value": "${INFERENCE_TEXT_MODEL}"
        },
        {
          "key": "DISABLE_SIGNUPS",
          "value": "${DISABLE_SIGNUPS}"
        },
        {
          "key": "DISABLE_PASSWORD_AUTH",
          "value": "${DISABLE_PASSWORD_AUTH}"
        },
        {
          "key": "OAUTH_CLIENT_ID",
          "value": "${OAUTH_CLIENT_ID}"
        },
        {
          "key": "OAUTH_CLIENT_SECRET",
          "value": "${OAUTH_CLIENT_SECRET}"
        },
        {
          "key": "OAUTH_WELLKNOWN_URL",
          "value": "${OAUTH_WELLKNOWN_URL}"
        },
        {
          "key": "OAUTH_PROVIDER_NAME",
          "value": "${OAUTH_PROVIDER_NAME}"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/app",
          "containerPath": "/data"
        }
      ]
    },
    {
      "name": "hoarder-chrome",
      "image": "gcr.io/zenika-hub/alpine-chrome:124",
      "command": [
        "--no-sandbox",
        "--disable-gpu",
        "--disable-dev-shm-usage",
        "--remote-debugging-address=0.0.0.0",
        "--remote-debugging-port=9222",
        "--hide-scrollbars"
      ]
    },
    {
      "name": "hoarder-meilisearch",
      "image": "getmeili/meilisearch:v1.13.3",
      "environment": [
        {
          "key": "MEILI_NO_ANALYTICS",
          "value": "true"
        },
        {
          "key": "MEILI_MASTER_KEY",
          "value": "${MEILI_MASTER_KEY}"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/melli_data",
          "containerPath": "/meili_data"
        }
      ]
    }
  ],
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json"
}
