{
  "$schema": "../dynamic-compose-schema.json",
  "services": [
    {
      "name": "pocket-id",
      "image": "ghcr.io/pocket-id/pocket-id:v1",
      "isMain": true,
      "internalPort": 1411,
      "environment": {
        "APP_URL": "${APP_URL}",
        "ENCRYPTION_KEY": "${ENCRYPTION_KEY}",
        "TRUST_PROXY": "${TRUST_PROXY}",
        "MAXMIND_LICENSE_KEY": "${MAXMIND_LICENSE_KEY}",
        "PUID": "${PUID:-1000}",
        "PGID": "${PGID:-1000}"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/pocket-id",
          "containerPath": "/app/data"
        }
      ],
      "healthCheck": {
        "test": "/app/pocket-id healthcheck",
        "interval": "90s",
        "timeout": "5s",
        "retries": 2
      }
    }
  ]
}
